/*
 * Copyright(c) 2015 Yuki Kurata <yuki.kurata@gmail.com>
 * MIT Licensed
 */
var date_format=function(){function e(e,n,r,u){return(e=t(e))?("number"==typeof r&&(e=i(e,r,u)),n=n||T,~n.indexOf("{")||(n=n.replace(j,function(e){return"{"+e+"}"})),n.replace(O,function(t,n){return n in Y?Y[n](e):t})):""}function t(e){return e instanceof Date?Number.isNaN(e.getTime())?null:new Date(e):"string"!=typeof e?null:(e=e.replace(E,function(e,t,n,r,u){var i=parseInt(x.indexOf(t)/2,10);return F[i].y+1*n-1+"-"+r+"-"+u}),e=new Date(e),Number.isNaN(e.getTime())?null:e)}function n(e,t){var n=F[F.length-1],r=e.getFullYear();if(1873>r)return n;for(var u=0,i=F.length;i>u;u++){var o=F[u];if(t&&o.d<=e||!t&&o.y<=r)return o}return n}function r(e){var t=new Date(e.getFullYear(),0,1),n=(e-t)/p+t.getDay()-1;return Math.floor(n/7)+1}function u(e,t){if(0===e)return"〇";if(0>e||e>9999)return"";if(t)return(""+e).split("").map(function(e){return"0"===e?"〇":C[1*e]}).join("");var n=("0000"+e).slice(-4).split(""),r=1*n[0],u=1*n[1],i=1*n[2],o=1*n[3];return(0===r?"":1===r?"千":C[r]+"千")+(0===u?"":1===u?"百":C[u]+"百")+(0===i?"":1===i?"十":C[i]+"十")+(0===o?"":C[o])}function i(e,n,r,u,i,o){if(e=t(e),!e)return null;0===n?(n=1,e.setTime(e.getTime()-p)):r&&e.setTime(e.getTime()+(n>0?-p:p));for(var a=l(u,i,o),f=365;n;)if(e.setTime(e.getTime()+(n>0?p:-p)),c(e,a)&&(n=n>0?n-1:n+1),--f<0)return null;return e}function o(e,n,r,u,i,o){if(e=t(e),!e)return null;0===n&&(n=1,e.setTime(e.getTime()+p));var a=n>0?1:-1;e.setTime(e.getTime()+p*a);for(var f=l(u,i,o),g=365;n;)if(e.setTime(e.getTime()-p*a),c(e,f)&&(n-=a),--g<0)return null;return r||e.setTime(e.getTime()-p*a),e}function a(e,n,r,u,i){if(e=t(e),n=t(n),!e||!n)return null;if(e=new Date(e.getFullYear(),e.getMonth(),e.getDate()),n=new Date(n.getFullYear(),n.getMonth(),n.getDate()),n.getTime()<e.getTime())return null;for(var o=l(r,u,i),a=0;e.getTime()<=n.getTime();)c(e,o)&&a++,e.setTime(e.getTime()+p);return a}function l(e,t,n){(void 0===e||null===e)&&(e=b),(void 0===t||null===t)&&(t=w),(void 0===n||null===n)&&(n=N);var r,u=null,i=null===n,o="function"==typeof t?t:null,a="function"==typeof n?n:null;return"string"==typeof t&&(u=f(t.split(","))),""===e?r=[]:"string"==typeof e&&(r=g(e)),"string"==typeof n&&(r=r.concat(g(n))),{regularWeek:u,closed:r,holidayAuto:i,regularFn:o,holidayFn:a}}function f(e){if(!e)return null;var t=[].slice.call(A).concat(W).map(function(e){return e.toLowerCase()}).concat($);if(Array.isArray(e)){var n=e.map(function(e){return t.indexOf(e.trim().toLowerCase())%7}).filter(function(e){return~e});return n.length?n:null}var r=t.indexOf(e.toLowerCase())%7;return-1===r?null:r}function c(e,t){t=t||l();var n=100*(e.getMonth()+1)+1*e.getDate();return t.regularWeek&&~t.regularWeek.indexOf(e.getDay())?!1:~t.closed.indexOf(n)?!1:t.holidayAuto&&n in s(e.getFullYear())?!1:t.regularFn&&t.regularFn(e)?!1:t.holidayFn&&t.holidayFn(e)?!1:!0}function g(e){var t=[];return e.split(",").forEach(function(e){var n=e.trim().match(L);if(n&&n[3]){var r=1*n[1],u=1*n[2],i=1*n[3],o=1*n[4];for(r>i&&(i+=12);100*i+o>=100*r+u;)t.push(100*(r>12?r-12:r)+u),u>=31?(r++,u=1):u++}else n&&t.push(100*n[1]+1*n[2])}),t}function s(e){var t=J[e];return t?t:1948>e?{}:(t={},M.forEach(function(n){var r=h(e,n);if(r){var u=100*r[0]+r[1];t[u]=r[2]}}),m(e,t),1948===e&&Object.keys(t).forEach(function(e){720>1*e&&delete t[e]}),J[e]=t,t)}function h(e,t){var n=t.match(/(\S+)/g),r=n[0];if("春分の日"===r)return y(e);if("秋分の日"===r)return d(e);for(var u=1;u<n.length;u++){var i=n[u].match(z);if(i){var o=1*i[4],a=1*(i[1]||(7>o?1949:1948)),l=1*(i[3]||(i[2]?e:i[1]||e)),f=i[6]?v(e,o,i[5],i[6]):1*i[5];if(e>=a&&l>=e)return[o,f,r]}}return null}function y(e){if(e>2099)return null;var t;switch(e%4){case 0:t=1956>=e?21:2088>=e?20:19;break;case 1:t=1989>=e?21:20;break;case 2:t=2022>=e?21:20;break;case 3:t=1923>=e?22:2055>=e?21:20}return[3,t,"春分の日"]}function d(e){if(e>2099)return null;var t;switch(e%4){case 0:t=2008>=e?23:22;break;case 1:t=1917>=e?24:2041>=e?23:22;break;case 2:t=1946>=e?24:2074>=e?23:22;break;case 3:t=1979>=e?24:23}return[9,t,"秋分の日"]}function m(e,t){var n=null,r=[];e>=1988&&Object.keys(t).forEach(function(t){var u=new Date(e,1*t.slice(0,-2)-1,1*t.slice(-2));n&&(n.setTime(n.getTime()+p),n.getTime()+p===u.getTime()&&r.push(100*(n.getMonth()+1)+n.getDate())),n=u});var u=[];if(e>=1973){var i=new Date(1973,3,29).getTime(),o=!1,a=Object.keys(t);a.push("1231"),a.forEach(function(t){var r=new Date(e,1*t.slice(0,-2)-1,1*t.slice(-2));o?(n.setTime(n.getTime()+p),n.getTime()!==r.getTime()&&(u.push(100*(n.getMonth()+1)+n.getDate()),o=!1)):o=0===r.getDay()&&i<=r.getTime(),n=r})}u.forEach(function(e){t[e]="振替休日"}),r.forEach(function(e){e in t||(t[e]="国民の休日")})}function v(e,t,n,r){var u=W.indexOf(r),i=new Date(e,t-1,1).getDay(),o=1+u-i+(i>u?7:0);return o+7*(n-1)}function D(t,n,r){var u,i,o,a;if("number"==typeof t||/^\d{1,4}$/.test(t))u=1*t,i=1,o=1*t,a=12;else{var l=/^(\d{1,4})\D+(\d{1,2})(?:\D+(\d{1,4})\D+(\d{1,2}))?$/,c=t.match(l);if(!c)return null;u=1*c[1],i=1*c[2],o=1*(c[3]||c[1]),a=1*(c[4]||c[2])}for(var g=f(n),s=null===g?null:0===g?6:g-1,h=[];100*o+a>=100*u+i;){var y=new Date(u,i-1,1),d=y.getDay();null!==g&&(y=new Date(u,i-1,g-d-(d>=g?-1:6)));var m=new Date(u,i,0);if(r&&null!==g)m=new Date(y.getTime()+41*p);else if(null!==g){var v=m.getDay();m=new Date(u,i,g-v+(v>=g?6:-1))}for(var D=!0;;){var T=e(y,"{Y}|{m}|{d}|{w}|{eigyo}|{holiday2}").split("|"),w={som:D,eom:!1,year:1*T[0],month:1*T[1],day:1*T[2],week:1*T[3],opened:"休"!==T[4],holiday:T[5]};if(D=!1,null!==g&&(w.sow=g===1*T[3],w.eow=s===1*T[3],w.ghost=w.month!==i,w.block=u+"/"+("0"+i).slice(-2)),h.push(w),y.getTime()===m.getTime()){w.eom=!0;break}y.setTime(y.getTime()+p)}i=i>=12?1:i+1,u=1===i?u+1:u}return h}var T="Y-m-d H:i:s",p=864e5,w="土,日",b="12/29-1/3",F=[{N:"平成",n:"H",y:1989,d:new Date("1989-01-08 00:00:00.000")},{N:"昭和",n:"S",y:1926,d:new Date("1926-12-25 00:00:00.000")},{N:"大正",n:"T",y:1912,d:new Date("1912-07-30 00:00:00.000")},{N:"明治",n:"M",y:1868,d:new Date("1868-01-25 00:00:00.000")},{N:"西暦",n:"",y:1,d:new Date("0001-01-01 00:00:00.000")}],M=["元日         1/1","成人の日     -1999/1/15  2000-/1/2Mon","建国記念の日 1967-/2/11","春分の日","天皇誕生日   -1988/4/29","みどりの日   1989-2006/4/29","昭和の日     2007-/4/29","憲法記念日   5/3","みどりの日   2007-/5/4","こどもの日   5/5","海の日       1996-2002/7/20  2003-/7/3Mon","山の日       2016-/8/11","敬老の日     1966-2002/9/15  2003-/9/3Mon","秋分の日","体育の日     1966-1999/10/10 2000-/10/2Mon","文化の日     11/3","勤労感謝の日 11/23","天皇誕生日   1989-/12/23","皇太子・明仁親王の結婚の儀  1959/4/10","昭和天皇の大喪の礼          1989/2/24","即位の礼正殿の儀            1990/11/12","皇太子・徳仁親王の結婚の儀  1993/6/9"],N=null,Y={hizuke:function(e){return this.Y(e)+"/"+this.m(e)+"/"+this.d(e)},wareki:function(e){return this.nengo(e)+this.nen(e)+"年"+this.n(e)+"月"+this.j(e)+"日"},wareki2:function(e){return this.Nengo(e)+this.Nen(e)+"年"+this.n(e)+"月"+this.j(e)+"日"},Y:function(e){return e.getFullYear()},y:function(e){return String(e.getFullYear()).slice(-2)},L:function(e){return 29===new Date(e.getFullYear(),1,29).getDate()?1:0},nengo:function(e){return n(e).N},nengo2:function(e){return n(e).n},nen:function(e){return e.getFullYear()-n(e).y+1},nen2:function(e){var t=e.getFullYear()-n(e).y+1;return 1===t?"元":t},nen3:function(e){var t=e.getFullYear()-n(e).y+1;return 1===t?"元":u(t,t>100)},nen4:function(e){var t=e.getFullYear()-n(e).y+1;return 1===t?"元":u(t,!0)},Nengo:function(e){return n(e,!0).N},Nengo2:function(e){return n(e,!0).n},Nen:function(e){return e.getFullYear()-n(e,!0).y+1},Nen2:function(e){var t=e.getFullYear()-n(e,!0).y+1;return 1===t?"元":t},Nen3:function(e){var t=e.getFullYear()-n(e,!0).y+1;return 1===t?"元":u(t,t>100)},Nen4:function(e){var t=e.getFullYear()-n(e,!0).y+1;return 1===t?"元":u(t,!0)},m:function(e){return("0"+(e.getMonth()+1)).slice(-2)},n:function(e){return e.getMonth()+1},F:function(e){return S[e.getMonth()]},M:function(e){return S[e.getMonth()].substring(0,3)},tuki:function(e){return u(e.getMonth()+1)},tuki2:function(e){return u(e.getMonth()+1,!0)},t:function(e){var t=new Date(e.getFullYear(),e.getMonth()+1,0);return t.getDate()},W:function(e){return r(e)},d:function(e){return("0"+e.getDate()).slice(-2)},j:function(e){return e.getDate()},niti:function(e){return u(e.getDate())},niti2:function(e){return u(e.getDate(),!0)},S:function(e){return H[e.getDate()]},z:function(e){return Math.floor((e.getTime()-new Date(e.getFullYear(),0,1).getTime())/p)},w:function(e){return e.getDay()},N:function(e){return e.getDay()||7},l:function(e){return A[e.getDay()]},D:function(e){return W[e.getDay()]},yobi:function(e){return $[e.getDay()]},yobi2:function(e){return this.holiday(e)?"祝":this.yobi(e)},yobi3:function(e){var t=this.yobi2(e);return t+("祝"===t?"日":"曜日")},eigyo:function(e){return c(e)?this.yobi(e):"休"},eigyo2:function(e){var t=this.eigyo(e);return t+("休"===t?"業日":"曜日")},holiday:function(e){var t=100*(e.getMonth()+1)+e.getDate();return s(e.getFullYear())[t]||""},holiday2:function(e){var t=100*(e.getMonth()+1)+e.getDate();return s(e.getFullYear())[t]||(~g(b).indexOf(t)?"休業日":"")},g:function(e){return e.getHours()%12},G:function(e){return e.getHours()},h:function(e){return("0"+e.getHours()%12).slice(-2)},H:function(e){return("0"+e.getHours()).slice(-2)},i:function(e){return("0"+e.getMinutes()).slice(-2)},s:function(e){return("0"+e.getSeconds()).slice(-2)},u:function(e){return("00"+e.getMilliseconds()).slice(-3)+"000"},a:function(e){return e.getHours()<12?"am":"pm"},A:function(e){return e.getHours()<12?"AM":"PM"},aj:function(e){return e.getHours()<12?"午前":"午後"}},k=Object.keys(Y).sort(function(e,t){return t.length-e.length}),j=new RegExp(k.join("|"),"g"),O=/\{(\w+)\}/g,x=F.reduce(function(e,t){return t.n&&(e.push(t.N),e.push(t.n)),e},[]),E=new RegExp("^("+x.join("|")+")(\\d+)\\D+(\\d+)\\D+(\\d+)\\D*$"),S="January,February,March,April,May,June,July,August,September,October,November,December".split(","),H="0,st,nd,rd,th,th,th,th,th,th,th,th,th,th,th,th,th,th,th,th,th,st,nd,rd,th,th,th,th,th,th,th,st".split(","),A="Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),W="Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),$="日月火水木金土".split(""),C=",一,二,三,四,五,六,七,八,九".split(","),L=/^(\d{1,2})\/(\d{1,2})(?:-(\d{1,2})\/(\d{1,2}))?$/,J={},z=/^(?:(\d+)?(-)?(\d+)?\/)?(\d+)\/(\d+)(Sun|Mon|Tue|Wed|Thu|Fri|Sat)?$/;return e.defaultFormat=T,e.paramKeys=Object.keys(Y),e.getWeekIndex=f,e.addEigyobi=i,e.toEigyobi=o,e.countEigyobi=a,e.getHolidays=s,e.getCalendarData=D,e}();"object"==typeof global&&"object"==typeof module&&(module.exports=date_format);